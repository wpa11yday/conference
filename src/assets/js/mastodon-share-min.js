(()=>{var l="mastodon-instance",o=localStorage.getItem(l);o=o===null?"":o;var e=document.querySelector(".mastodon-share"),d=n=>{let t=u(n);t?t=n:t="https://"+n,e.href=`${t}/share?text=${encodeURIComponent(document.title)}%0A${encodeURIComponent(location.href)}`};function u(n){try{return new URL(n),!0}catch(t){return!1}}if(e){let n=e.dataset.prompt||"Add your Mastodon instance, e.g. wptoots.social",t=e.dataset.editlabel||"Edit your Mastodon instance",s=e.dataset.edittext||"\u270F\uFE0F",i=r=>{o=window.prompt(n,o),o&&(localStorage.setItem(l,o),c(),d(o),e.click())},c=r=>{if(document.querySelector("button.mastodon-edit"))return;let a=document.createElement("button");a.innerText=s,a.classList.add("mastodon-edit"),a.title=t,a.ariaLabel=t,a.addEventListener("click",m=>{m.preventDefault(),localStorage.removeItem(l),i()}),e.insertAdjacentElement("afterend",a)};localStorage.getItem(l)&&c(),e.addEventListener("click",r=>{localStorage.getItem(l)?d(localStorage.getItem(l)):(r.preventDefault(),i())})}})();
